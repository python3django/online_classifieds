# online_classifieds - доска объявлений
---

(**_на данный момент находится в разроботке_**)

Доска объявлений позволяет пользовтелям публиковать совои объявления.  
Созданна с применением фреймоврка Django (на сервере) и элементами  
JavaScript (на клиентской стороне).  


## Состоит из двух приложений:
- account - предоставляет весь функционал связанный с  
  регистрацией, авторизацией, аутентификацией и т.д.  
- classifieds - реализует функционал доски объявлений:  
    - меню выбора рубрики, категории или подкатегории;  
    - просмотр всех объявлений, либо соответсвующих определенной рубрике,  
      катигории или подкатигории;  
    - просморт детальной информации о конкретном объявлении;  
    - создание объявления (доступно аутентифицированному пользователю);  
    - редактировани объявления (доступно только пользователю который  
      создал данное объявление);  


### Поисковая система создана с использованием функционала б.д. PostgreSQL
В Linux создать б.д. можно следующим способом:  
(PostgreSQL должен быть уже установлен и исправно функционировать)  
- В консоли следующей коммандой создаем бд:  
    **sudo -u postgres createdb dbame**  
    (dbame - здесь должно быть имя которым Вы назовете Вашу бд)  
- Подключаемся к PostgreSQL:  
    **sudo -u postgres psql**  
- Создаем Вашего username с соответсвующим 'password':  
    **CREATE ROLE username WITH LOGIN PASSWORD 'password';**  
- Даем все привелегии на dbame созданному ранее username:  
    **GRANT ALL PRIVILEGES ON DATABASE dbame TO username;**  
- Даем нашему username право создавать новые бд (нужно будет для тестов):  
    **ALTER USER username CREATEDB;**  


### Загрузка демонстрационного дампа базы данных
В демонстрационно-тестовых целях создан небольшой дамп базы данных,  
который поможет быстро ознакомится с работой приложения.  
В дампе находятся данные только из таблиц приложения classifieds.  
Сам дамп в файле classifieds.json (папка fixtures). Также понадобятся  
изображения которые хранятся в папке media.  
Перед загрузкой дампа в бд должны быть созданы пользователи с id 2 и 3  
(помимо администратора с id=1), потому что все записи в поле "user"  
имеют именно эти идентификаторы. Если у Ваших пользователей другие id,  
то редактируем в файле classifieds.json все поля "user", присваивая им  
id существующих у Вас пользователей.  
Загрузка дампа осуществляется командой:  
**python3 manage.py loaddata fixtures/classifieds.json**  


### Celery  
При регистрации нового пользоватея на указаный им email отсылается  
токен для завершения процесса регистрации. Данная задача выполняется  
с помощью менеджера задач Celery. Для работы ему нужен брокер  
сообщений (рекомендуется RabbitMQ). Запускать Celery нужно в отдельном  
терминале из вашего каталога проекта, используя следующую команду:  
**celery -A mysite worker -l info**  
Отслеживать выполняемые асинхронные задачи можно  
с помощью Flower - это веб-инструмент для мониторинга Celery.  


### django-ratelimit  
При помощи этой программы устанавливаем лимит на количество создаваемых  
пользователем объявлений в минуту. Это нужно чтобы защититься от  
возможных действий злоумышлинников, направленных на автоматическое  
создание огромного количества "фейковых" объявлений, которые в свою  
очередь могут негативно повлиять на работу сайта.  




